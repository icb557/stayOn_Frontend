<div class="home-container">
  <div class="carousel-wrapper">
    <img
      src="https://estudios.unad.edu.co/images/2024/SUA.jpg"
      class="carousel-slide active"
      alt="Slide 1"
    />
    <img
      src="https://estudios.unad.edu.co/images/2025/estrategias-digitales-de-comunicacion.jpg"
      class="carousel-slide"
      alt="Slide 2"
    />
    <img
      src="https://estudios.unad.edu.co/images/2024/Espanol-como-Segunda-Lengua.jpg"
      class="carousel-slide"
      alt="Slide 3"
    />
  </div>
  <!-- Panel para crear publicaci칩n -->
  <div class="post-creator-wrapper">
    <div class="post-creator">
      <div class="post-header">Crear publicaci칩n</div>
      <div class="post-body">
        <textarea
          class="post-message"
          placeholder="쯈u칠 est치s pensando?"
        ></textarea>

        <input
          type="text"
          class="post-topic"
          placeholder="Tema (ej. Tecnolog칤a, Psicolog칤a...)"
        />

        <div class="attachment-area">
          <label for="file-upload" class="attachment-label"
            >游늹 Adjuntar archivo</label
          >
          <input type="file" id="file-upload" class="file-input" multiple />
        </div>

        <button class="comment-btn publish-btn">Publicar</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="main-content">
      <!-- Posts del usuario -->
      <div class="posts-container">
        @for (item of posts; track item.id; let i=$index) {
        <div class="post-card">
          <div class="post-author">
            <div class="post-avatar">
              {{ item.User.firstName.charAt(0).toUpperCase() || ""
              }}{{ item.User.lastName.charAt(0).toUpperCase() || "" }}
            </div>
            <div class="post-author-info">
              <div class="post-author-name" (click)="showProfile(item.userId)">
                {{ item.User.firstName || "" }} {{ item.User.lastName || "" }}
              </div>
              <div class="post-date">{{ formatDate(item.date) }}</div>
              <div class="post-tag">{{ item.Topic.name }}</div>
            </div>
          </div>
          <div class="post-content">
            {{ item.message }}
          </div>
          <div class="post-attachments">
            @for (item of item.Materials; track $index) {
            <div class="attachments-box">
              <div class="attachment">
                @switch (item.type) { @case ('document') {
                <i class="bx bxs-file"></i>
                } @case ('image') {
                <i class="bx bxs-image"></i>
                } @case ('video') {
                <i class="bx bxs-video"></i>
                } @case ('url') {
                <i class="bx bx-link"></i>
                } @default {
                <i class="bx bx-question-mark"></i>
                } }
              </div>
              <div class="attachment-label">{{ item.name }}</div>
            </div>

            } @empty { No hay archivos adjuntos. }
          </div>
          <div class="post-footer">
            <hr class="post-separator" />
            <button class="comment-btn" (click)="showPost(item.id)">
              Ver publicaci칩n
            </button>
          </div>
        </div>
        }
      </div>
    </div>

    <!-- Panel lateral derecho completo -->
    <div class="following-container">
      <!-- Barra de b칰squeda -->
      <form>
        <div class="search-bar">
          <input
            type="text"
            [(ngModel)]="user"
            name="user"
            placeholder="Buscar personas o temas..."
          />
          <button class="search-btn" (click)="searchUser()">Buscar</button>
        </div>
      </form>

      <!-- Temas sugeridos -->
      <div class="suggested-topics">
        <div class="topics-header">Temas sugeridos</div>
        <div class="topics-list">
          <span class="topic-tag">Matem치ticas</span>
          <span class="topic-tag">Literatura</span>
          <span class="topic-tag">F칤sica</span>
          <span class="topic-tag">Desarrollo Web</span>
          <span class="topic-tag">Inteligencia Artificial</span>
          <span class="topic-tag">Estadistica</span>
          <span class="topic-tag">Redes</span>
        </div>
      </div>

      <!-- Siguiendo -->
      <div class="following-header">Siguiendo</div>
      <div class="following-list">
        <div class="following-item">
          <div class="following-avatar">LC</div>
          <div class="following-info">
            <div class="following-name">Laura Castillo</div>
            <div class="following-program">Ing. Industrial</div>
          </div>
          <button class="btn-follow btn-following">Siguiendo</button>
        </div>

        <div class="following-item">
          <div class="following-avatar">MV</div>
          <div class="following-info">
            <div class="following-name">Miguel Vargas</div>
            <div class="following-program">Ing. Sistemas</div>
          </div>
          <button class="btn-follow btn-following">Siguiendo</button>
        </div>

        <div class="following-item">
          <div class="following-avatar">AP</div>
          <div class="following-info">
            <div class="following-name">Ana Patricia Soto</div>
            <div class="following-program">Medicina</div>
          </div>
          <button class="btn-follow btn-following">Siguiendo</button>
        </div>
      </div>
    </div>
  </div>
</div>
